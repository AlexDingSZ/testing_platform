<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>TP_LIST_ADD</title>
    <style th:href="@{/layer/skin/default/layer.css}"></style>
    <script th:src="@{/js/jquery-1.12.3.min.js}"></script>
    <script th:src="@{/layer/layer.js}"></script>
    <script language="javascript">
        $(document).ready(function(){
            $("a[name='a_exc']").click(function () {
                var o_id = $(this).parent().find("[name='id']");
                $("#tpId").attr('value',o_id.val());

                //页面层-自定义
                layer.open({
                    type: 1,
                    skin: 'layui-layer-rim', //加上边框
                    area: ['420px', '240px'], //宽高
                    content: $("#run_plan").html()
                });
            });
            
            // uploadFileDiv   handInputDiv     inputType
            //todo 应该根据radio的选中状态，而不是根据click来判断
            $("input[name='inputType']").bind('click',function(){
                var this_val = $(this).val();
                var handInputDiv = $("#handInputDiv");
                var uploadFileDiv = $("#uploadFileDiv");
                if( '0'===this_val ){
                    handInputDiv.show();
                    uploadFileDiv.hide();
                }else if( '1'===this_val ){
                    handInputDiv.hide();
                    uploadFileDiv.show();
                }
            });
        });

    </script>
</head>
<body>     
<!--/*@thymesVar id="tp" type="com.wangc.test_plan.bean.TestPlanBean"*/-->

<form th:action="@{/tp/add}" th:method="post" th:object="${tp}">
<table >
    <tr>
        <td >测试计划名称</td>
        <td ><input th:name="tpName" type="text" /></td>
    </tr>
    <tr >
        <td ></td>
        <td >
            <input type="radio" th:id="inputType0" th:name="inputType" th:value="0" th:selected="true"/>手工录入
            <input type="radio" th:id="inputType1" th:name="inputType" th:value="1"/>上传jmx
        </td>
    </tr>
    <tr >
        <td colspan="2">
            <div id="handInputDiv">
                <table>
                    <tr>
                        <td >url</td>
                        <td ><input th:name="url" type="text" /></td>
                    </tr>
                    <tr>
                        <td >测试描述</td>
                        <td ><input th:name="description" type="text" /></td>
                    </tr>
                    <tr>
                        <td >测试数据生成类</td>
                        <td ><input th:name="generater" th:id="generater" type="text" /></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr >
        <td colspan="2">
            <div id="uploadFileDiv" style="display: none;">
                <table>
                    <tr >
                        <td >选择文件</td>
                        <td >
                            <!--todo 不能嵌套form 使用ajax上传文件-->
                            <form method="POST" enctype="multipart/form-data" th:action="@{/tp/upload}">
                                <p>文件：<input type="file" name="file" /></p>
                                <p><input type="submit" value="上传" /></p>
                            </form>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td></td>
        <td><input type="submit" id="submit" name="submit"/></td>
    </tr>
    
</table>

</form>
</body>
</html>